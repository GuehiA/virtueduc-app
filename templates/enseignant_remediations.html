<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <!-- Favicon VirtuEduc -->
  <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='favicon/apple-touch-icon.png') }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon/favicon-32x32.png') }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon/favicon-16x16.png') }}">
  <link rel="manifest" href="{{ url_for('static', filename='favicon/site.webmanifest') }}">
  <link rel="shortcut icon" href="{{ url_for('static', filename='favicon/favicon.ico') }}">
  <meta name="msapplication-TileColor" content="#4361ee">
  <meta name="theme-color" content="#4361ee">
  <title>Suggestions de rem√©diation</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
    h2 { color: #2c3e50; text-align: center; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #fff; }
    th, td { padding: 12px; border: 1px solid #ddd; text-align: left; vertical-align: top; }
    th { background: #3498db; color: #fff; }
    tr:nth-child(even) { background: #f9f9f9; }
    .timestamp { color: #888; font-size: 0.9em; }
    .actions { display: flex; flex-direction: column; gap: 6px; margin-top: 5px; }
    .btn {
      padding: 6px 12px;
      font-size: 0.9em;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      text-align: center;
    }
    .btn-valider { background-color: #2ecc71; color: white; }
    .btn-modifier { background-color: #f39c12; color: white; }
    .btn-refuser { background-color: #e74c3c; color: white; }

    .btn-valider:hover { background-color: #27ae60; }
    .btn-modifier:hover { background-color: #d68910; }
    .btn-refuser:hover { background-color: #c0392b; }

    .exercice { white-space: pre-wrap; font-family: monospace; font-size: 0.95em; margin-top: 6px; }
    .no-data { text-align: center; color: #666; margin-top: 40px; }

    .export-pdf {
      text-align: center;
      margin-top: 25px;
    }

    .export-pdf a {
      background-color: #8e44ad;
      color: white;
      padding: 10px 20px;
      text-decoration: none;
      border-radius: 5px;
    }

    .export-pdf a:hover { background-color: #71368a; }
  </style>
</head>
<body>

  <h2>üß† Suggestions de rem√©diation g√©n√©r√©es</h2>

  {% if suggestions %}
    <table>
      <thead>
        <tr>
          <th>√âl√®ve</th>
          <th>Niveau</th>
          <th>Th√®me</th>
          <th>Le√ßon</th>
          <th>Analyse & Exercice</th>
          <th>Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for s in suggestions %}
        <tr>
          <td>{{ s.user.nom_complet }}<br><span class="timestamp">{{ s.user.username }}</span></td>
          <td>{{ s.user.niveau.nom }}</td>
          <td>{{ s.theme }}</td>
          <td>{{ s.lecon }}</td>
          <td>
            <strong>Message :</strong><br>{{ s.message }}<br><br>
            <strong>Exercice :</strong>
            <div class="exercice">{{ s.exercice_suggere }}</div>
          </td>
          <td>{{ s.timestamp.strftime('%d/%m/%Y %H:%M') }}</td>
          <td>
            <div class="actions">
              <form action="{{ url_for('valider_remediation', id=s.id) }}" method="POST">
                <button type="submit" class="btn btn-valider">‚úÖ Valider</button>
              </form>
              <form action="{{ url_for('modifier_remediation_form', id=s.id) }}" method="GET">
                <button type="submit" class="btn btn-modifier">‚úèÔ∏è Modifier</button>
              </form>
              <form action="{{ url_for('refuser_remediation', id=s.id) }}" method="POST">
                <button type="submit" class="btn btn-refuser">üóë Refuser</button>
              </form>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="no-data">Aucune suggestion de rem√©diation trouv√©e.</p>
  {% endif %}

</body>
</html>
